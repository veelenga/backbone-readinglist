(function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;$(function(){return ReadingList.Book=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.defaults={read:!1,stars:0},c.prototype.toggle_read=function(){return this.save({read:!this.get("read")})},c.prototype.clear=function(){return this.destroy(),this.view.remove()},c}(Backbone.Model)})}).call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;$(function(){return ReadingList.BookList=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.model=ReadingList.Book,c.prototype.localStorage=new Backbone.LocalStorage("readinglist"),c.prototype.getRead=function(a){return a.get("read")},c.prototype.finished=function(){return this.filter(getRead)},c.prototype.toRead=function(){return this.without.apply(this,this.finished())},c.prototype.comparator=function(a){return a.get("order")},c}(Backbone.Collection)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;$(function(){return ReadingList.ApplicationView=function(c){function d(){return this.addOne=a(this.addOne,this),d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.el="#readinglist-app",d.prototype.template=ReadingList.App.templates.application,d.prototype.events={"click button#add-book":"addBook"},d.prototype.initialize=function(a){return null==a&&(a={}),this.bookAuthor=this.$("#book-author"),this.bookTitle=this.$("#book-title"),this.books=new ReadingList.BookList,this.books.bind("add",this.addOne),this.books.fetch(),this.books.size()<1?this.books.add(a.predefined):void 0},d.prototype.addOne=function(a){var b;return b=new ReadingList.BookView({model:a}),this.$("#books").append(b.render().el)},d.prototype.addBook=function(a){return this.books.create({author:this.bookAuthor.val(),title:this.bookTitle.val(),read:!1},{wait:!0}),this.bookAuthor.val(""),this.bookTitle.val("")},d}(Backbone.View)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;$(function(){return ReadingList.BookView=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="div",c.prototype.className="book",c.prototype.template=ReadingList.App.templates.book,c.prototype.events={"click span.book-edit":"edit","dblclick div.book-content":"edit","click span.book-destroy":"clear","click button.edit-book":"close"},c.prototype.initialize=function(){return this.model.view=this},c.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},c.prototype.clear=function(){return this.model.clear()},c.prototype.edit=function(){return this.$el.addClass("editing")},c.prototype.close=function(){return this.model.save({author:this.$(".edit-book-author").val(),title:this.$(".edit-book-title").val()}),this.$el.removeClass("editing"),this.render()},c}(Backbone.View)})}.call(this),function(){window.ReadingList={},ReadingList.App={init:function(a){return null==a&&(a={}),$(document).ready(function(){return new ReadingList.ApplicationView(a)})}}}.call(this),this.ReadingList=this.ReadingList||{},this.ReadingList.App=this.ReadingList.App||{},this.ReadingList.App.templates=this.ReadingList.App.templates||{},this.ReadingList.App.templates.book=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<li class="list-group-item">\n\n  <div class="book-content">\n    '+__e(author)+" - "+__e(title)+'\n    <span class="fa fa-trash pull-right fa-lg book-destroy"></span>\n    <span class="fa fa-pencil pull-right fa-fw book-edit"></span>\n  </div>\n\n  <div class="book-edit">\n    <div class="form-inline row">\n      <div class="form-group col-md-5 col-sm-5">\n        <input class="form-control edit-book-author" value="'+__e(author)+'" type="text" autofocus />\n      </div>\n      <div class="form-group col-md-5 col-sm-5">\n        <input class="form-control edit-book-title" value="'+__e(title)+'" type="text" />\n      </div>\n      <div class="col-md-2">\n        <button class="btn btn-warning edit-book" type="submit">Save</button>\n      </div>\n    </div>\n  </div>\n\n</li>\n';return __p};